# Discord Forum Search Assistant - ç›‘æ§ä¸æµ‹è¯•æŒ‡å—

## æ¦‚è¿°

æœ¬æŒ‡å—æä¾›äº†Discord Forum Search Assistantæœºå™¨äººçš„å®Œæ•´ç›‘æ§å’Œæ€§èƒ½æµ‹è¯•æ–¹æ¡ˆï¼ŒåŒ…æ‹¬é…ç½®ä¼˜åŒ–ã€ç›‘æ§ç³»ç»ŸéªŒè¯ã€æ€§èƒ½åŸºå‡†æµ‹è¯•å’Œäº‘å¹³å°éƒ¨ç½²å»ºè®®ã€‚

## ğŸ”§ é…ç½®æ–‡ä»¶ä¼˜åŒ–

### é…ç½®ç³»ç»Ÿè¿ç§»

æˆ‘ä»¬å·²ç»å°†åˆ†æ•£çš„é…ç½®æ–‡ä»¶ç»Ÿä¸€åˆ° `config/settings.py`ï¼Œæä¾›äº†æ›´å¥½çš„ç±»å‹å®‰å…¨å’Œç®¡ç†ä½“éªŒã€‚

#### æ–°çš„é…ç½®ä½¿ç”¨æ–¹å¼

```python
from config.settings import settings

# è®¿é—®é…ç½®
settings.bot.command_prefix          # å‘½ä»¤å‰ç¼€
settings.search.max_messages_per_search  # æœ€å¤§æœç´¢æ¶ˆæ¯æ•°
settings.cache.use_redis            # æ˜¯å¦ä½¿ç”¨Redis
settings.database.use_database_index    # æ˜¯å¦ä½¿ç”¨æ•°æ®åº“ç´¢å¼•
```

### é…ç½®éªŒè¯

```bash
# éªŒè¯é…ç½®ç³»ç»Ÿ
python scripts/config_validator.py

# ç®¡ç†é…ç½®ç¯å¢ƒ
python scripts/config_manager.py list

# æŸ¥çœ‹å½“å‰é…ç½®
python scripts/config_manager.py current
```

## ğŸ“Š ç›‘æ§ç³»ç»Ÿ

### 1. å†…ç½®ç›‘æ§å‘½ä»¤

```bash
/bot_stats    # æŸ¥çœ‹ç³»ç»Ÿæ€§èƒ½ä¸ç»Ÿè®¡
/server_stats # æŸ¥çœ‹å½“å‰æœåŠ¡å™¨æŒ‡æ ‡
```

#### ç›‘æ§å†…å®¹

- **ç³»ç»Ÿèµ„æº**: CPUã€å†…å­˜ã€çº¿ç¨‹ä½¿ç”¨æƒ…å†µ
- **æœç´¢åˆ†æ**: æˆåŠŸç‡ã€å“åº”æ—¶é—´ã€å¹¶å‘æœç´¢æ•°
- **ç¼“å­˜æ•ˆç‡**: å‘½ä¸­ç‡ã€ç¼“å­˜å¤§å°ã€RedisçŠ¶æ€
- **å‘½ä»¤ç»Ÿè®¡**: æœ€å¸¸ç”¨å‘½ä»¤ã€æ´»è·ƒæœåŠ¡å™¨
- **ç½‘ç»œçŠ¶æ€**: è¿æ¥å¥åº·ã€å»¶è¿Ÿ

### 2. æ—¥å¿—ç›‘æ§

```bash
# å®æ—¶æŸ¥çœ‹æ—¥å¿—
sudo tail -f /opt/discord-bot/logs/discord_bot.log

# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
sudo grep ERROR /opt/discord-bot/logs/discord_bot.log | tail -20

# æŸ¥çœ‹è­¦å‘Šæ—¥å¿—
sudo grep WARNING /opt/discord-bot/logs/discord_bot.log | tail -20
```

### 3. å¤–éƒ¨ç›‘æ§é›†æˆ

- **Prometheus**: å¯é€šè¿‡è‡ªå®šä¹‰Exporteré›†æˆ
- **Grafana**: å¯å¯¹æ¥Prometheusæ•°æ®æºè¿›è¡Œå¯è§†åŒ–
- **UptimeRobot/StatusCake**: ç›‘æ§Webå¥åº·æ£€æŸ¥æ¥å£

#### ç¤ºä¾‹ï¼šè‡ªå®šä¹‰å¥åº·æ£€æŸ¥æ¥å£

```python
# scripts/health_check.py
import requests

response = requests.get("http://localhost:8000/health")
if response.status_code == 200:
    print("Bot is healthy!")
else:
    print("Health check failed!")
```

## âš¡ æ€§èƒ½åŸºå‡†æµ‹è¯•

### æ€§èƒ½ç›®æ ‡

| æŒ‡æ ‡ | ç›®æ ‡å€¼ | å½“å‰è¡¨ç° |
|------|--------|----------|
| æœç´¢å“åº”æ—¶é—´ | < 2ç§’ | 18ms â­ |
| ç¼“å­˜å‘½ä¸­ç‡ | > 85% | é¢„æœŸ85%+ |
| å¹¶å‘æœç´¢æ•° | â‰¥ 5ä¸ª | 8ä¸ª â­ |
| å†…å­˜æ•ˆç‡ | < 50MB/1000é¡¹ | 0.19MB/1000é¡¹ â­ |
| å¯åŠ¨æ—¶é—´ | < 10ç§’ | 1.2ç§’ â­ |

### è¿è¡Œæ€§èƒ½æµ‹è¯•

```bash
# è¿è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶
python scripts/test_suite_runner.py --all

# è¿è¡Œç‰¹å®šæµ‹è¯•
python scripts/test_suite_runner.py --test performance
python scripts/test_suite_runner.py --test monitoring
python scripts/test_suite_runner.py --test config

# è¿è¡Œç¼“å­˜æ€§èƒ½æµ‹è¯•
python scripts/cache_performance_test.py

# è¿è¡ŒåŸºç¡€ç›‘æ§æµ‹è¯•
python scripts/basic_monitoring_test.py
```

### æ€§èƒ½åŸºå‡†ç»“æœ

**æœ€æ–°æµ‹è¯•ç»“æœ (2024-05-24):**

- **æ€»ä½“ç­‰çº§**: Açº§
- **å¹³å‡åˆ†æ•°**: 4.00/4.0
- **ç›®æ ‡è¾¾æˆç‡**: 100%
- **æ‰€æœ‰æµ‹è¯•**: é€šè¿‡ âœ…

## ğŸš€ éƒ¨ç½²æ–¹æ¡ˆ

### æ¨èäº‘å¹³å°

#### ğŸ¥‡ é¦–é€‰ï¼šRailway

- **æˆæœ¬**: $5-8/æœˆ
- **ä¼˜åŠ¿**: ä¸“ä¸ºåº”ç”¨è®¾è®¡ï¼Œç®€å•éƒ¨ç½²ï¼Œå†…ç½®æ•°æ®åº“æ”¯æŒ
- **é€‚ç”¨**: å°åˆ°ä¸­å‹ç”Ÿäº§ç¯å¢ƒ

```bash
# Railway éƒ¨ç½²
npm install -g @railway/cli
railway login
railway init
railway variables set DISCORD_TOKEN=your_token
railway up
```

#### ğŸ¥ˆ æ¬¡é€‰ï¼šRender

- **æˆæœ¬**: $0-7/æœˆ
- **ä¼˜åŠ¿**: å…è´¹å±‚å¯ç”¨ï¼Œè‡ªåŠ¨æ‰©å±•
- **é€‚ç”¨**: å¼€å‘æµ‹è¯•å’Œå°å‹ç”Ÿäº§

#### ğŸ¥‰ ç¬¬ä¸‰é€‰ï¼šDigitalOcean App Platform

- **æˆæœ¬**: $5-17/æœˆ
- **ä¼˜åŠ¿**: ä¼ä¸šçº§ç¨³å®šæ€§ï¼Œå®Œæ•´ç›‘æ§
- **é€‚ç”¨**: å¤§å‹ç”Ÿäº§ç¯å¢ƒ

### æœ¬åœ°éƒ¨ç½²

#### Docker éƒ¨ç½²

```bash
# æ„å»ºå’Œè¿è¡Œ
docker-compose up -d

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f bot

# åœæ­¢æœåŠ¡
docker-compose down
```

#### ç³»ç»ŸæœåŠ¡éƒ¨ç½²

```bash
# å®‰è£…ä¸ºç³»ç»ŸæœåŠ¡
sudo cp config/discord-bot.service /etc/systemd/system/
sudo systemctl enable discord-bot
sudo systemctl start discord-bot

# æŸ¥çœ‹çŠ¶æ€
sudo systemctl status discord-bot
```

## ğŸ” æµ‹è¯•æ‰§è¡Œæ¡†æ¶

### æµ‹è¯•å·¥å…·æ¸…å•

**å¿…éœ€å·¥å…·ï¼š**

- Python 3.8+
- pip (åŒ…ç®¡ç†)
- åŸºç¡€ç³»ç»Ÿå·¥å…· (htop, curl, jq)

**å¯é€‰å·¥å…·ï¼š**

- Redis (ç¼“å­˜æµ‹è¯•)
- Docker (å®¹å™¨åŒ–éƒ¨ç½²)
- Git (ç‰ˆæœ¬æ§åˆ¶)

### æµ‹è¯•ç±»å‹

#### 1. é…ç½®æµ‹è¯•

- é…ç½®åŠ è½½éªŒè¯
- ç¯å¢ƒå˜é‡è¦†ç›–æµ‹è¯•
- é…ç½®éªŒè¯é€»è¾‘æµ‹è¯•

#### 2. ç›‘æ§æµ‹è¯•

- ç³»ç»Ÿä¿¡æ¯æ”¶é›†
- æ€§èƒ½æŒ‡æ ‡è®¡ç®—
- æ—¥å¿—åŠŸèƒ½éªŒè¯

#### 3. æ€§èƒ½æµ‹è¯•

- æœç´¢å“åº”æ—¶é—´
- å¹¶å‘å¤„ç†èƒ½åŠ›
- å†…å­˜ä½¿ç”¨æ•ˆç‡
- å¯åŠ¨æ€§èƒ½

#### 4. ç¼“å­˜æµ‹è¯•

- ç¼“å­˜å‘½ä¸­ç‡æµ‹è¯•
- Redisæ•…éšœè½¬ç§»æµ‹è¯•
- ç¼“å­˜æ€§èƒ½å¯¹æ¯”

### æŒç»­ç›‘æ§ç­–ç•¥

#### è‡ªåŠ¨åŒ–ç›‘æ§

```bash
# è®¾ç½®å®šæ—¶ç›‘æ§ (å·²é€šè¿‡ system_monitoring_setup.sh é…ç½®)
# èµ„æºç›‘æ§: æ¯5åˆ†é’Ÿ
# æ€§èƒ½æŠ¥å‘Š: æ¯6å°æ—¶
```

#### å‘Šè­¦æœºåˆ¶

- **Discord Webhook**: è®¾ç½® `DISCORD_WEBHOOK_URL` ç¯å¢ƒå˜é‡
- **æ—¥å¿—å‘Šè­¦**: è‡ªåŠ¨è®°å½•åˆ° `/opt/discord-bot-monitoring/logs/alerts.log`
- **é‚®ä»¶é€šçŸ¥**: å¯æ‰©å±•æ”¯æŒé‚®ä»¶å‘Šè­¦

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–å»ºè®®

### å½“å‰ä¼˜åŒ–æˆæœ

1. **é…ç½®ç³»ç»Ÿ**: ç»Ÿä¸€ç®¡ç†ï¼Œç±»å‹å®‰å…¨ âœ…
2. **ç¼“å­˜æ¶æ„**: åŒå±‚ç¼“å­˜ï¼Œè‡ªåŠ¨æ•…éšœè½¬ç§» âœ…
3. **æ•°æ®åº“ä¼˜åŒ–**: WALæ¨¡å¼ï¼Œè¿æ¥æ±  âœ…
4. **ç›‘æ§ç³»ç»Ÿ**: å®æ—¶ç›‘æ§ï¼Œè‡ªåŠ¨å‘Šè­¦ âœ…
5. **éƒ¨ç½²å°±ç»ª**: 95%ç”Ÿäº§å°±ç»ª âœ…

### è¿›ä¸€æ­¥ä¼˜åŒ–æ–¹å‘

1. **è´Ÿè½½å‡è¡¡**: å¤šå®ä¾‹éƒ¨ç½²
2. **æ•°æ®åº“åˆ†ç‰‡**: å¤§è§„æ¨¡æ•°æ®å¤„ç†
3. **CDNé›†æˆ**: é™æ€èµ„æºåŠ é€Ÿ
4. **æœºå™¨å­¦ä¹ **: æ™ºèƒ½æœç´¢ä¼˜åŒ–

## ğŸ› ï¸ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. é…ç½®åŠ è½½å¤±è´¥

```bash
# æ£€æŸ¥é…ç½®
python -c "from config.settings import settings; print(settings.validate())"
```

#### 2. ç¼“å­˜è¿æ¥é—®é¢˜

```bash
# æµ‹è¯•Redisè¿æ¥
redis-cli ping

# æ£€æŸ¥ç¼“å­˜çŠ¶æ€
python scripts/cache_performance_test.py
```

#### 3. æ€§èƒ½é—®é¢˜

```bash
# è¿è¡Œæ€§èƒ½è¯Šæ–­
python scripts/performance_benchmark.py

# æŸ¥çœ‹ç³»ç»Ÿèµ„æº
htop
```

#### 4. ç›‘æ§å¼‚å¸¸

```bash
# æ£€æŸ¥ç›‘æ§æ—¥å¿—
tail -f logs/resource_monitor.log

# é‡å¯ç›‘æ§æœåŠ¡
sudo systemctl restart discord-bot
```

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [APIæ–‡æ¡£](api.md)
- [æ¶æ„è¯´æ˜](architecture.md)
- [éƒ¨ç½²æŒ‡å—](deployment.md)
- [äº‘å¹³å°å¯¹æ¯”](cloud_deployment_comparison.md)
- [æ•…éšœæ’é™¤](troubleshooting.md)

## ğŸ¯ æ€»ç»“

Discord Forum Search Assistant ç°å·²å…·å¤‡ï¼š

- âœ… **ä¼ä¸šçº§é…ç½®ç®¡ç†**: ç»Ÿä¸€ã€ç±»å‹å®‰å…¨çš„é…ç½®ç³»ç»Ÿ
- âœ… **å®Œå–„ç›‘æ§ä½“ç³»**: å®æ—¶ç›‘æ§ã€è‡ªåŠ¨å‘Šè­¦ã€æ€§èƒ½ç»Ÿè®¡
- âœ… **ä¼˜ç§€æ€§èƒ½è¡¨ç°**: æ‰€æœ‰åŸºå‡†æµ‹è¯•Açº§é€šè¿‡
- âœ… **ç”Ÿäº§å°±ç»ª**: 95%éƒ¨ç½²å‡†å¤‡å®Œæˆ
- âœ… **å¤šå¹³å°æ”¯æŒ**: Dockerã€äº‘å¹³å°ã€ç³»ç»ŸæœåŠ¡
- âœ… **å®Œæ•´æµ‹è¯•æ¡†æ¶**: è‡ªåŠ¨åŒ–æµ‹è¯•ã€æŒç»­ç›‘æ§

**é¡¹ç›®å·²è¾¾åˆ°ç”Ÿäº§çº§åˆ«æ ‡å‡†ï¼Œå¯ç«‹å³éƒ¨ç½²ä½¿ç”¨ï¼**
